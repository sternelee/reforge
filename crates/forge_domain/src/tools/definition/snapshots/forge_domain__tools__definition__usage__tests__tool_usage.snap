---
source: crates/forge_domain/src/tools/definition/usage.rs
expression: prompt
---
<tool>{"name":"read","description":"Reads file contents from the specified absolute path. Ideal for analyzing\n code, configuration files, documentation, or textual data. Returns the\n content as a string with line number prefixes by default. For files larger\n than 2,000 lines, the tool automatically returns only the first 2,000 lines.\n You should always rely on this default behavior and avoid specifying custom\n ranges unless absolutely necessary. If needed, specify a range with the\n start_line and end_line parameters, ensuring the total range does not exceed\n 2,000 lines. Specifying a range exceeding this limit will result in an\n error. Binary files are automatically detected and rejected.","arguments":{"end_line":{"description":"Optional end position in lines (inclusive). If provided, reading will end at this line position.","type":"integer","is_required":false},"path":{"description":"The path of the file to read, always provide absolute paths.","type":"string","is_required":true},"show_line_numbers":{"description":"If true, prefixes each line with its line index (starting at 1). Defaults to true.","type":"boolean","is_required":false},"start_line":{"description":"Optional start position in lines (1-based). If provided, reading will start from this line position.","type":"integer","is_required":false}}}</tool>
<tool>{"name":"read_image","description":"Reads image files from the file system and returns them in base64-encoded\n format for vision-capable models. Supports common image formats: JPEG, PNG,\n WebP, and GIF. The path must be absolute and point to an existing file. Use\n this tool when you need to process, analyze, or display images with vision\n models. Do NOT use this for text files - use the `read` tool instead. Do NOT\n use for other binary files like PDFs, videos, or archives. The tool will\n fail if the file doesn\\'t exist or if the format is unsupported. Returns the\n image content encoded in base64 format ready for vision model consumption.","arguments":{"path":{"description":"The absolute path to the image file (e.g., /home/user/image.png). Relative paths are not supported. The file must exist and be readable.","type":"string","is_required":true}}}</tool>
<tool>{"name":"write","description":"Use it to create a new file at a specified path with the provided content.\n Always provide absolute paths for file locations. The tool\n automatically handles the creation of any missing intermediary directories\n in the specified path.\n IMPORTANT: DO NOT attempt to use this tool to move or rename files, use the\n shell tool instead.","arguments":{"content":{"description":"The content to write to the file. ALWAYS provide the COMPLETE intended content of the file, without any truncation or omissions. You MUST include ALL parts of the file, even if they haven't been modified.","type":"string","is_required":true},"overwrite":{"description":"If set to true, existing files will be overwritten. If not set and the file exists, an error will be returned with the content of the existing file.","type":"boolean","is_required":false},"path":{"description":"The path of the file to write to (absolute path required)","type":"string","is_required":true}}}</tool>
<tool>{"name":"search","description":"Recursively searches directories for files by content (regex) and/or name\n (glob pattern). Provides context-rich results with line numbers for content\n matches. Two modes: content search (when regex provided) or file finder\n (when regex omitted). Uses case-insensitive Rust regex syntax. Requires\n absolute paths. Avoids binary files and excluded directories. Best for code\n exploration, API usage discovery, configuration settings, or finding\n patterns across projects. For large pages, returns the first 200\n lines and stores the complete content in a temporary file for\n subsequent access.","arguments":{"file_pattern":{"description":"Glob pattern to filter files (e.g., '*.ts' for TypeScript files). If not provided, it will search all files (*).","type":"string","is_required":false},"max_search_lines":{"description":"Maximum number of lines to return in the search results.","type":"integer","is_required":false},"path":{"description":"The absolute path of the directory or file to search in. If it's a directory, it will be searched recursively. If it's a file path, only that specific file will be searched.","type":"string","is_required":true},"regex":{"description":"The regular expression pattern to search for in file contents. Uses Rust regex syntax. If not provided, only file name matching will be performed.","type":"string","is_required":false},"start_index":{"description":"Starting index for the search results (1-based).","type":"integer","is_required":false}}}</tool>
<tool>{"name":"sem_search","description":"AI-powered semantic code search. YOUR DEFAULT TOOL for code discovery\n tasks. Use this when you need to find code locations, understand\n implementations, or explore functionality - it works with natural language\n about behavior and concepts, not just keyword matching.\n Start with sem_search when: locating code to modify, understanding how\n features work, finding patterns/examples, or exploring unfamiliar areas.\n Understands queries like \\\"authentication flow\\\" (finds login), \\\"retry logic\\\n (finds backoff), \\\"validation\\\" (finds checking/sanitization).\n Returns file:line locations with code context, ranked by relevance. Use\n multiple varied queries (2-3) for best coverage. For exact string matching\n (TODO comments, specific function names), use regex search instead.","arguments":{"file_extension":{"description":"Optional file extension filter (e.g., \".rs\", \".ts\", \".py\"). If provided, only files with this extension will be included in the search results.","type":"string","is_required":false},"queries":{"description":"List of search queries to execute in parallel. Using multiple queries (2-3) with varied phrasings significantly improves results - each query captures different aspects of what you're looking for. Each query pairs a search term with a use_case for reranking. Example: for authentication, try \"user login verification\", \"token generation\", \"OAuth flow\".","type":"array","is_required":true}}}</tool>
<tool>{"name":"remove","description":"Request to remove a file at the specified path. Use this when you need to\n delete an existing file. The path must be absolute. This operation cannot\n be undone, so use it carefully.","arguments":{"path":{"description":"The path of the file to remove (absolute path required)","type":"string","is_required":true}}}</tool>
<tool>{"name":"patch","description":"Modifies files with targeted line operations on matched patterns. Supports\n prepend, append, replace, replace_all, swap operations. Ideal for precise\n changes to configs, code, or docs while preserving context. Not suitable for\n complex refactoring or modifying all pattern occurrences - use `write`\n instead for complete rewrites and `undo` for undoing the last operation.\n Fails if search pattern isn\\'t found.\\\\n\\\\nUsage Guidelines:\\\\n-When editing\n text from Read tool output, ensure you preserve new lines and the exact\n indentation (tabs/spaces) as it appears AFTER the line number prefix. The\n line number prefix format is: line number + \\':\\'. Everything\n after that is the actual file content to match. Never include any part\n of the line number prefix in the search or content","arguments":{"content":{"description":"The text to replace it with (must be different from search)","type":"string","is_required":true},"operation":{"description":"The operation to perform on the matched text. Possible options are: - 'prepend': Add content before the matched text - 'append': Add content after the matched text - 'replace': Use only for specific, targeted replacements where you need to modify just the first match. - 'replace_all': Should be used for renaming variables, functions, types, or any widespread replacements across the file. This is the recommended choice for consistent refactoring operations as it ensures all occurrences are updated. - 'swap': Replace the matched text with another text (search for the second text and swap them)","type":"string","is_required":true},"path":{"description":"The path to the file to modify","type":"string","is_required":true},"search":{"description":"The text to replace. When skipped the patch operation applies to the entire content. `Append` adds the new content to the end, `Prepend` adds it to the beginning, and `Replace` fully overwrites the original content. `Swap` requires a search target, so without one, it makes no changes.","type":"string","is_required":false}}}</tool>
<tool>{"name":"undo","description":"Reverts the most recent file operation (create/modify/delete) on a specific\n file. Use this tool when you need to recover from incorrect file changes or\n if a revert is requested by the user.","arguments":{"path":{"description":"The absolute path of the file to revert to its previous state.","type":"string","is_required":true}}}</tool>
<tool>{"name":"shell","description":"Executes shell commands.\n The `cwd` parameter sets the working directory for command execution.\n CRITICAL: Do NOT use `cd` commands in the command string. This is FORBIDDEN.\n Always use the `cwd` parameter to set the working directory instead. Any use\n of `cd` in the command is redundant, incorrect, and violates the tool\n contract. Use for file system interaction, running utilities, installing\n packages, or executing build commands. Returns complete output including\n stdout, stderr, and exit code for diagnostic purposes.","arguments":{"command":{"description":"The shell command to execute.","type":"string","is_required":true},"cwd":{"description":"The working directory where the command should be executed.","type":"string","is_required":true},"env":{"description":"Environment variable names to pass to command execution (e.g., [\"PATH\", \"HOME\", \"USER\"]). The system automatically reads the specified values and applies them during command execution.","type":"array","is_required":false},"keep_ansi":{"description":"Whether to preserve ANSI escape codes in the output. If true, ANSI escape codes will be preserved in the output. If false (default), ANSI escape codes will be stripped from the output.","type":"boolean","is_required":false}}}</tool>
<tool>{"name":"fetch","description":"Input type for the net fetch tool","arguments":{"raw":{"description":"Get raw content without any markdown conversion (default: false)","type":"boolean","is_required":false},"url":{"description":"URL to fetch","type":"string","is_required":true}}}</tool>
<tool>{"name":"followup","description":"Use this tool when you encounter ambiguities, need clarification, or require\n more details to proceed effectively. Use this tool judiciously to maintain a\n balance between gathering necessary information and avoiding excessive\n back-and-forth.","arguments":{"multiple":{"description":"If true, allows selecting multiple options; if false (default), only one option can be selected","type":"boolean","is_required":false},"option1":{"description":"First option to choose from","type":"string","is_required":false},"option2":{"description":"Second option to choose from","type":"string","is_required":false},"option3":{"description":"Third option to choose from","type":"string","is_required":false},"option4":{"description":"Fourth option to choose from","type":"string","is_required":false},"option5":{"description":"Fifth option to choose from","type":"string","is_required":false},"question":{"description":"Question to ask the user","type":"string","is_required":true}}}</tool>
<tool>{"name":"plan","description":"Creates a new plan file with the specified name, version, and content. Use\n this tool to create structured project plans, task breakdowns, or\n implementation strategies that can be tracked and referenced throughout\n development sessions.","arguments":{"content":{"description":"The content to write to the plan file. This should be the complete plan content in markdown format.","type":"string","is_required":true},"plan_name":{"description":"The name of the plan (will be used in the filename)","type":"string","is_required":true},"version":{"description":"The version of the plan (e.g., \"v1\", \"v2\", \"1.0\")","type":"string","is_required":true}}}</tool>
<tool>{"name":"skill","description":"Fetches detailed information about a specific skill. Use this tool to load\n skill content and instructions when you need to understand how to perform a\n specialized task. Skills provide domain-specific knowledge, workflows, and\n best practices. Only invoke skills that are listed in the available skills\n section. Do not invoke a skill that is already active.","arguments":{"name":{"description":"The name of the skill to fetch (e.g., \"pdf\", \"code_review\")","type":"string","is_required":true}}}</tool>
