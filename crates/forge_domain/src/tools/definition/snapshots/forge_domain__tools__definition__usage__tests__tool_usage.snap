---
source: crates/forge_domain/src/tools/definition/usage.rs
expression: prompt
---
<tool>{"name":"read","description":"Reads a file from the local filesystem. You can access any file directly by using this tool. Assume this tool is able to read all files on the machine. If the User provides a path to a file assume that path is valid. It is okay to read a file that does not exist; an error will be returned.\n\nUsage:\n- The path parameter must be an absolute path, not a relative path\n- By default, it reads up to {{env.maxReadSize}} lines starting from the beginning of the file\n- You can optionally specify a line start_line and end_line (especially handy for long files), but it's recommended to read the whole file by not providing these parameters\n- Any lines longer than {{env.maxLineLength}} characters will be truncated\n- Results are returned using rg \"\" -n format, with line numbers starting at 1\n{{#if (contains model.input_modalities \"image\")}}\n- This tool allows Forge Code to read images (eg PNG, JPG, etc). When reading an image file the contents are presented visually.\n- PDFs, Automatically encoded as base64 and sent as visual content for LLM to analyze pages. Any PDFs larger than {{env.maxImageSize}} bytes will return error\n{{/if}}\n- Jupyter notebooks (.ipynb files) are read as plain JSON text - you can parse the cell structure, outputs, and embedded content directly from the JSON\n- This tool can only read files, not directories. To read a directory, use an ls command via the `shell` tool.\n- You can call multiple tools in a single response. It is always better to speculatively read multiple potentially useful files in parallel.","arguments":{"end_line":{"description":"Optional end position in lines (inclusive). If provided, reading will end at this line position.","type":"integer","is_required":false},"path":{"description":"The path of the file to read, always provide absolute paths.","type":"string","is_required":true},"show_line_numbers":{"description":"If true, prefixes each line with its line index (starting at 1). Defaults to true.","type":"boolean","is_required":false},"start_line":{"description":"Optional start position in lines (1-based). If provided, reading will start from this line position.","type":"integer","is_required":false}}}</tool>
<tool>{"name":"write","description":"Writes a file to the local filesystem.\n\nUsage:\n- The path parameter must be an absolute path, not a relative path\n- The tool automatically handles the creation of any missing intermediary directories in the specified path\n- For existing files being overwritten (when overwrite=true), snapshots are automatically created to enable undo functionality.\n- If a file exists and 'overwrite' is false (or not set), an error will be returned indicating the file already exists\n- Files are automatically validated for syntax errors when possible; validation failures are reported but don't prevent file creation\n- Snapshots are automatically created before overwriting existing files to enable undo functionality\n- IMPORTANT: DO NOT attempt to use this tool to move or rename files, use the shell tool instead.\n- ALWAYS prefer editing existing files in the codebase. NEVER write new files unless explicitly required.\n- NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.\n- Only use emojis if the user explicitly requests it. Avoid writing emojis to files unless asked.","arguments":{"content":{"description":"The content to write to the file. ALWAYS provide the COMPLETE intended content of the file, without any truncation or omissions. You MUST include ALL parts of the file, even if they haven't been modified.","type":"string","is_required":true},"overwrite":{"description":"If set to true, existing files will be overwritten. If not set and the file exists, an error will be returned with the content of the existing file.","type":"boolean","is_required":false},"path":{"description":"The path of the file to write to (absolute path required)","type":"string","is_required":true}}}</tool>
<tool>{"name":"fs_search","description":"Recursively searches directories for files by content (regex) and/or name (glob pattern). Provides context-rich results with line numbers for content matches. Two modes: content search (when regex provided) or file finder (when regex omitted). Uses case-insensitive Rust regex syntax. Requires absolute paths. Avoids binary files and excluded directories. Best for code exploration, API usage discovery, configuration settings, or finding patterns across projects. For large pages, returns the first {{env.maxSearchLines}} lines and stores the complete content in a temporary file for subsequent access.","arguments":{"file_pattern":{"description":"Glob pattern to filter files (e.g., '*.ts' for TypeScript files). If not provided, it will search all files (*).","type":"string","is_required":false},"max_search_lines":{"description":"Maximum number of lines to return in the search results.","type":"integer","is_required":false},"path":{"description":"The absolute path of the directory or file to search in. If it's a directory, it will be searched recursively. If it's a file path, only that specific file will be searched.","type":"string","is_required":true},"regex":{"description":"The regular expression pattern to search for in file contents. Uses Rust regex syntax. If not provided, only file name matching will be performed.","type":"string","is_required":false},"start_index":{"description":"Starting index for the search results (1-based).","type":"integer","is_required":false}}}</tool>
<tool>{"name":"sem_search","description":"AI-powered semantic code search. YOUR DEFAULT TOOL for code discovery tasks. Use this when you need to find code locations, understand implementations, or explore functionality - it works with natural language about behavior and concepts, not just keyword matching.\n\nStart with sem_search when: locating code to modify, understanding how features work, finding patterns/examples, or exploring unfamiliar areas. Understands queries like \"authentication flow\" (finds login), \"retry logic\" (finds backoff), \"validation\" (finds checking/sanitization).\n\nReturns the topK most relevant file:line locations with code context. Use multiple varied queries (2-3) for best coverage. For exact string matching (TODO comments, specific function names), use regex search instead.","arguments":{"extensions":{"description":"File extension filters (e.g., [\".rs\", \".ts\", \".py\"]). Only files with these extensions will be included in the search results. At least one extension must be provided.","type":"array","is_required":true},"queries":{"description":"List of search queries to execute in parallel. Using multiple queries (2-3) with varied phrasings significantly improves results - each query captures different aspects of what you're looking for. Each query pairs a search term with a use_case for reranking. Example: for authentication, try \"user login verification\", \"token generation\", \"OAuth flow\".","type":"array","is_required":true}}}</tool>
<tool>{"name":"remove","description":"Request to remove a file at the specified path. Use this when you need to delete an existing file. The path must be absolute. This operation can be undone using the `undo` tool.","arguments":{"path":{"description":"The path of the file to remove (absolute path required)","type":"string","is_required":true}}}</tool>
<tool>{"name":"patch","description":"Performs exact string replacements in files. \n\nUsage:\n- You must use your `read` tool at least once in the conversation before editing. This tool will error if you attempt an edit without reading the file. \n- When editing text from read tool output, ensure you preserve the exact indentation (tabs/spaces) as it appears AFTER the line number prefix. The line number prefix format is: 'line_number:'. Everything after that line_number: is the actual file content to match. Never include any part of the line number prefix in the old_string or new_string.\n- ALWAYS prefer editing existing files in the codebase. NEVER write new files unless explicitly required.\n- Only use emojis if the user explicitly requests it. Avoid adding emojis to files unless asked.\n- The edit will FAIL if `old_string` is not unique in the file. Either provide a larger string with more surrounding context to make it unique or use `replace_all` to change every instance of `old_string`. \n- Use `replace_all` for replacing and renaming strings across the file. This parameter is useful if you want to rename a variable for instance.","arguments":{"file_path":{"description":"The absolute path to the file to modify","type":"string","is_required":true},"new_string":{"description":"The text to replace it with (must be different from old_string)","type":"string","is_required":true},"old_string":{"description":"The text to replace","type":"string","is_required":false},"operation":{"description":"The operation to perform on the matched text. Possible options are: - 'prepend': Add content before the matched text - 'append': Add content after the matched text - 'replace': Use only for specific, targeted replacements where you need to modify just the first match. - 'replace_all': Should be used for renaming variables, functions, types, or any widespread replacements across the file. This is the recommended choice for consistent refactoring operations as it ensures all occurrences are updated. - 'swap': Replace the matched text with another text (search for the second text and swap them)","type":"string","is_required":true}}}</tool>
<tool>{"name":"undo","description":"Reverts the most recent file operation (create/modify/delete) on a specific file. Use this tool when you need to recover from incorrect file changes or if a revert is requested by the user.","arguments":{"path":{"description":"The absolute path of the file to revert to its previous state.","type":"string","is_required":true}}}</tool>
<tool>{"name":"shell","description":"Executes shell commands. The `cwd` parameter sets the working directory for command execution.\n\nCRITICAL: Do NOT use `cd` commands in the command string. This is FORBIDDEN. Always use the `cwd` parameter to set the working directory instead. Any use of `cd` in the command is redundant, incorrect, and violates the tool contract. Use for running utilities, installing packages, or executing build commands. Returns complete output including stdout, stderr, and exit code for diagnostic purposes.","arguments":{"command":{"description":"The shell command to execute.","type":"string","is_required":true},"cwd":{"description":"The working directory where the command should be executed.","type":"string","is_required":true},"env":{"description":"Environment variable names to pass to command execution (e.g., [\"PATH\", \"HOME\", \"USER\"]). The system automatically reads the specified values and applies them during command execution.","type":"array","is_required":false},"keep_ansi":{"description":"Whether to preserve ANSI escape codes in the output. If true, ANSI escape codes will be preserved in the output. If false (default), ANSI escape codes will be stripped from the output.","type":"boolean","is_required":false}}}</tool>
<tool>{"name":"fetch","description":"Retrieves content from URLs as markdown or raw text. Enables access to current online information including websites, APIs and documentation. Use for obtaining up-to-date information beyond training data, verifying facts, or retrieving specific online content. Handles HTTP/HTTPS and converts HTML to readable markdown by default. Cannot access private/restricted resources requiring authentication. Respects robots.txt and may be blocked by anti-scraping measures. For large pages, returns the first 40,000 characters and stores the complete content in a temporary file for subsequent access.","arguments":{"raw":{"description":"Get raw content without any markdown conversion (default: false)","type":"boolean","is_required":false},"url":{"description":"URL to fetch","type":"string","is_required":true}}}</tool>
<tool>{"name":"followup","description":"Use this tool when you encounter ambiguities, need clarification, or require more details to proceed effectively. Use this tool judiciously to maintain a balance between gathering necessary information and avoiding excessive back-and-forth.","arguments":{"multiple":{"description":"If true, allows selecting multiple options; if false (default), only one option can be selected","type":"boolean","is_required":false},"option1":{"description":"First option to choose from","type":"string","is_required":false},"option2":{"description":"Second option to choose from","type":"string","is_required":false},"option3":{"description":"Third option to choose from","type":"string","is_required":false},"option4":{"description":"Fourth option to choose from","type":"string","is_required":false},"option5":{"description":"Fifth option to choose from","type":"string","is_required":false},"question":{"description":"Question to ask the user","type":"string","is_required":true}}}</tool>
<tool>{"name":"plan","description":"Creates a new plan file with the specified name, version, and content. Use this tool to create structured project plans, task breakdowns, or implementation strategies that can be tracked and referenced throughout development sessions.","arguments":{"content":{"description":"The content to write to the plan file. This should be the complete plan content in markdown format.","type":"string","is_required":true},"plan_name":{"description":"The name of the plan (will be used in the filename)","type":"string","is_required":true},"version":{"description":"The version of the plan (e.g., \"v1\", \"v2\", \"1.0\")","type":"string","is_required":true}}}</tool>
<tool>{"name":"skill","description":"Fetches detailed information about a specific skill. Use this tool to load skill content and instructions when you need to understand how to perform a specialized task. Skills provide domain-specific knowledge, workflows, and best practices. Only invoke skills that are listed in the available skills section. Do not invoke a skill that is already active.","arguments":{"name":{"description":"The name of the skill to fetch (e.g., \"pdf\", \"code_review\")","type":"string","is_required":true}}}</tool>
